@using GameScout.Domain.Models

@if (Deal is not null)
{
    <div class="card mb-3">
        <div class="card-body d-flex align-items-center">
            <img src="@Deal.Image"
                 alt="@Deal.Store"
                 class="rounded me-3"
                 style="width:64px;height:64px;object-fit:cover"
                 loading="lazy"
                 hidden="@string.IsNullOrEmpty(Deal.Image)" />


            <div class="flex-grow-1 d-flex justify-content-between align-items-center">
                <div class="fw-bold">@Deal?.Store</div>
                <div class="text-end">
                    <div class="fs-5">$@Deal.Price.ToString("F2")</div>

                    @if (Deal.NormalPrice > 0 && Deal.NormalPrice != Deal.Price)
                    {
                        <div class="text-muted text-decoration-line-through small">
                            $@Deal.NormalPrice.ToString("F2")
                        </div>
                        @if (Deal.Savings > 0)
                        {
                            <span class="badge bg-success">-@Math.Round(Deal.Savings)%</span>
                        }
                    }
                </div>
                <a class="btn btn-sm btn-primary ms-3" href="@Deal.Url" target="_blank" rel="noopener">Open</a>
            </div>
        </div>
    </div>
}

@code {
    [Parameter] public Deal? Deal { get; set; }
}
